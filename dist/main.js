(()=>{"use strict";class t{constructor(t){this.canvas=t,this.width=75,this.height=10,this.x=(t.width-this.width)/2,this.speed=5,this.dx=0}moveLeft(){this.dx=-this.speed}moveRight(){this.dx=this.speed}stop(){this.dx=0}update(){this.x+=this.dx,this.x<0&&(this.x=0),this.x+this.width>this.canvas.width&&(this.x=this.canvas.width-this.width)}draw(t){t.fillStyle="white",t.fillRect(this.x,this.canvas.height-this.height-10,this.width,this.height)}}class i{constructor(t,i){this.canvas=t,this.paddle=i,this.radius=5,this.x=t.width/2,this.y=t.height-30,this.dx=2,this.dy=-2}update(){this.x+=this.dx,this.y+=this.dy,(this.x<this.radius||this.x>this.canvas.width-this.radius)&&(this.dx*=-1),this.y<this.radius&&(this.dy*=-1),this.y+this.radius>=this.canvas.height-this.paddle.height-10&&this.x>=this.paddle.x&&this.x<=this.paddle.x+this.paddle.width&&(this.dy*=-1)}reset(){this.x=this.canvas.width/2,this.y=this.canvas.height-30,this.dx=2,this.dy=-2}hitBrick(t){return this.x>t.x&&this.x<t.x+t.width&&this.y>t.y&&this.y<t.y+t.height&&(this.dy*=-1,!0)}draw(t){t.fillStyle="white",t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fill(),t.closePath()}}class s{constructor(t,i,s,h){this.x=t,this.y=i,this.width=s,this.height=h}draw(t){t.fillStyle="red",t.fillRect(this.x,this.y,this.width,this.height)}}const h=document.getElementById("gameCanvas"),e=h.getContext("2d"),a=new class{constructor(s,h){this.canvas=s,this.ctx=h,this.paddle=new t(s),this.ball=new i(s,this.paddle),this.bricks=[],this.lives=3,this.score=0,this.createBricks(),this.handleInput()}createBricks(){for(let t=0;t<5;t++)for(let i=0;i<7;i++){let h=70*i+30,e=30*t+30;this.bricks.push(new s(h,e,60,20))}}handleInput(){document.addEventListener("keydown",(t=>{"ArrowLeft"===t.key&&this.paddle.moveLeft(),"ArrowRight"===t.key&&this.paddle.moveRight()})),document.addEventListener("keyup",(()=>{this.paddle.stop()}))}update(){this.ball.update(),this.paddle.update(),this.checkCollisions()}checkCollisions(){this.ball.y+this.ball.radius>this.canvas.height&&(this.lives--,0===this.lives?(alert("Game Over!"),document.location.reload()):this.ball.reset()),this.bricks=this.bricks.filter((t=>!this.ball.hitBrick(t)||(this.score+=10,!1))),0===this.bricks.length&&(alert("You Win!"),document.location.reload())}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.paddle.draw(this.ctx),this.ball.draw(this.ctx),this.bricks.forEach((t=>t.draw(this.ctx))),this.ctx.fillStyle="white",this.ctx.fillText(`Score: ${this.score}`,20,20),this.ctx.fillText(`Lives: ${this.lives}`,this.canvas.width-70,20)}loop(){this.update(),this.draw(),requestAnimationFrame((()=>this.loop()))}start(){this.loop()}}(h,e);a.start()})();